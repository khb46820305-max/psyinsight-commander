# 문제 해결 가이드

## 해결된 문제들

### 1. 요약 생성 실패 문제 ✅

**원인:**
- Gemini API 모델 이름 오류
- API 버전 호환성 문제

**해결 방법:**
- `modules/ai_engine.py`의 `get_model()` 함수 수정
- 모델 이름이 지원되지 않으면 대체 모델 자동 시도:
  - `gemini-1.5-flash` → `gemini-1.5-flash-latest` → `gemini-pro` → `gemini-1.5-pro`
- 에러 핸들링 강화

### 2. 위로 이동 버튼 작동 안 함 ✅

**원인:**
- Streamlit에서 JavaScript 스크롤 제어가 제한적
- `unsafe_allow_html`로 삽입한 JavaScript가 실행되지 않음

**해결 방법:**
- `st.rerun()` 사용
- 버튼 클릭 시 페이지를 다시 로드하여 자동으로 상단으로 이동
- Streamlit의 기본 동작 활용

### 3. 콘텐츠 팩토리 모델 오류 ✅

**원인:**
- `404 models/gemini-1.5-flash is not found for API version v1beta`
- API 버전 호환성 문제

**해결 방법:**
- `get_model()` 함수에 대체 모델 로직 추가
- 모델 초기화 실패 시 자동으로 다른 모델 시도
- 에러 메시지 개선

---

## 추가 확인 사항

### API 키 확인
1. `.env` 파일에 `GEMINI_API_KEY`가 올바르게 설정되어 있는지 확인
2. Streamlit Cloud의 경우 Secrets에 API 키가 설정되어 있는지 확인

### 모델 사용 가능 여부
- Google AI Studio에서 사용 가능한 모델 확인
- 최신 API 문서 참조

---

## 테스트 방법

1. **요약 생성 테스트:**
   - 뉴스 수집 버튼 클릭
   - 수집된 뉴스의 요약이 제대로 생성되는지 확인

2. **위로 이동 버튼 테스트:**
   - 각 탭에서 스크롤을 내린 후
   - "맨 위로 이동" 버튼 클릭
   - 페이지가 다시 로드되며 상단으로 이동하는지 확인

3. **콘텐츠 생성 테스트:**
   - 콘텐츠 팩토리 탭에서
   - 뉴스/논문 선택 후 템플릿 선택
   - 콘텐츠 생성 버튼 클릭
   - 정상적으로 생성되는지 확인

---

## 문제가 계속되면

1. **API 키 재확인:**
   - Google AI Studio에서 새 API 키 생성
   - `.env` 파일 업데이트

2. **모델 이름 변경:**
   - `modules/ai_engine.py`에서 기본 모델 이름 변경
   - 예: `"gemini-1.5-flash"` → `"gemini-pro"`

3. **로그 확인:**
   - 콘솔에서 에러 메시지 확인
   - Streamlit Cloud의 로그 확인
